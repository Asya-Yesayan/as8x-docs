---
layout: page
title: "Տվյալների աղբյուրի օգտագործման օրինակներ" 
---

# Տվյալների աղբյուրի կատարման ուղեցույց AS-8X համակարգում

## Ներածություն

AS-8X համակարգում տվյալների աղբյուրի կատարման երկու հիմնական մեթոդ կա՝ **չտիպիզացված** և **տիպիզացված**: Այս երկու մեթոդները տարբերվում են իրենց իրականացման, օգտագործման և վերադարձվող արդյունքի առումով:

## Հիմնական տարբերությունները

1. **Պարամետրերի փոխանցում**
   * Չտիպիզացված՝ օգտագործում է Dictionary<string, object>՝ պարամետրերի արժեքների պահման համար
   * Տիպիզացված՝ օգտագործում է պարամետրերը նկարագրող դասը
2. **Կատարման մեթոդ**
   * Չտիպիզացված՝ DataSourceService դասի ExecuteDataSource մեթոդը
   * Տիպիզացված՝ տվյալների աղբյուրը նկարագրող դասի օբյեկտի Execute մեթոդը
3. **Վերադարձվող արդյունք**
   * Չտիպիզացված՝ List<T>՝ որպես T վերադարձնելով տվյալների աղբյուրի սյուները նկարագրող դասը
   * Տիպիզացված՝ DataSourceResult<R>` որպես R վերադարձնելով տվյալների աղբյուրի սյուները նկարագրող դասը
4. **Տիպի անվտանգություն**
   * Չտիպիզացված՝ ցածր, հնարավոր են runtime սխալներ
   * Տիպիզացված՝ բարձր, compile-time ստուգումներ են իրականացվում
5. **Լրացուցիչ մետատվյալներ**
   * Չտիպիզացված՝ չի տրամադրում
   * Տիպիզացված՝ տրամադրում է (տվյալների աղբյուրի [սխեմա](../definitions/schema.md), կատարման ընթացքում առաջացած սխալների մասին ինֆորմացիա և այլն)

Հիմա անցնենք յուրաքանչյուր մեթոդի քայլ առ քայլ ուղեցույցին:

## 1. Չտիպիզացված կատարում

### Քայլեր՝

1. Ստեղծել Dictionary<string, object> տիպի օբյեկտ պարամետրերի համար:
2. Փոխանցել կատարման համար անհրաժեշտ պարամետրերը Dictionary-ին՝ որպես key գրելով պարամետրի անունը, իսկ որպես value` արժեքը:
3. Կանչել DataSourceService դասի ExecuteDataSource մեթոդը՝ փոխանցելով տվյալների աղբյուրի ներքին անվանումը և պարամետրերի ցանկը:

### Օրինակ՝

```csharp

// 1. Ստեղծել պարամետրերի Dictionary
var dsParams = new Dictionary<string, object>();

// 2. Լրացնել պարամետրերը
dsParams["Type"] = "C";
dsParams["Date"] = DateTime.Now;
dsParams["AgrCondIn"] = "ModType:5";
dsParams["ShowWithoutOutSum"] = true;
// ... այլ պարամետրեր ...

// 3. Կատարել տվյալների աղբյուրը
var dsResult = this.dsService.ExecuteDataSource<PAGRINFO>("PAGRINFO", dsParams);
```
### Արդյունք՝
Վերադարձնում է List<PAGRINFO> տիպի օբյեկտ, որտեղ PAGRINFO-ն տվյալների աղբյուրի տողերը նկարագրող դասն է:

## 1. Տիպիզացված  կատարում

### Քայլեր՝

1. Ստանալ տվյալների աղբյուրի նկարագրող դասը DataSourceService դասի GetDataSource մեթոդով:
2. Ստեղծել տվյալների աղբյուրի պարամետրերը նկարագրող դասի օբյեկտ՝ փոխանցելով կատարման համար անհրաժեշտ պարամետրերը։
3. Կանչել տվյալների աղբյուրի DataSourceService դասի Execute մեթոդը՝ փոխանցելով պարամետրերը նկարագրող դասը:

### Օրինակ՝

```csharp

// 1. Ստանալ տվյալների աղբյուրը 
var dsPAGRINFO = this.dsService.GetDataSource<PAGRINFO>(); 

// 2. Ստեղծել և լրացնել պարամետրերի նկարագրող դասի օբյեկտը 
var dsParams = new PAGRINFO.Param { 
    Type = "C", 
    Date = DateTime.Now, 
    AgrCondIn = "ModType:5", 
    ShowWithoutOutSum = true, 
    // ... այլ պարամետրեր ... 
}; 

// 4. Կատարել տվյալների աղբյուրը 
var dsResult = await dsPAGRINFO.Execute(dsParams);

```
### Արդյունք՝
Վերադարձնում է DataSourceResult<PAGRINFO> տիպի օբյեկտ, որը պարունակում է՝
- Rows: List<PAGRINFO> - տվյալների աղբյուրի տողերը,
- Schema: Schema - տվյալների աղբյուրի սխեման,
- Columns: HashSet<string> - սյուների անվանումները,
- Progress: DataSourceExecutionProgress - կատարման պրոգրեսը,
- Այլ օգտակար տեղեկատվություն (ErrorDetails, isRestException և այլն)

Տիպիզացված ձևով կատարումը վերադարձնում է ավելի շատ մետատվյալներ, քան ոչ տիպիզացված կատարումը:



