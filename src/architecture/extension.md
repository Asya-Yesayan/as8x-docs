---
layout: page
title: "Ընդլայնում" 
sublinks:
- { title: "Ի՞նչ է ընդլայնումը", ref: ինչ-է-ընդլայնումը }
- { title: "Ընդլայնումների ավելացման եղանակներ", ref: ընդլայնումների-ավելացման-եղանակներ }
- { title: "Ընդլայնումների ավելացում SysCon գործիքով ներմուծման միջոցով", ref: ընդլայնումների-ավելացում-syscon-գործիքով-ներմուծման-միջոցով }
- { title: "Ընդլայնումների ավելացում .NET գրադարանների տեղադրման միջոցով", ref: ընդլայնումների-ավելացում-net-գրադարանների-տեղադրման-միջոցով }
---

## Բովանդակություն

- [Բովանդակություն](#բովանդակություն)
- [Ի՞նչ է ընդլայնումը](#ինչ-է-ընդլայնումը)
- [Ընդլայնումների ավելացման եղանակներ](#ընդլայնումների-ավելացման-եղանակներ)
- [Ընդլայնումների ավելացում SysCon գործիքով ներմուծման միջոցով](#ընդլայնումների-ավելացում-syscon-գործիքով-ներմուծման-միջոցով)
- [Ընդլայնումների ավելացում .NET գրադարանների տեղադրման միջոցով](#ընդլայնումների-ավելացում-net-գրադարանների-տեղադրման-միջոցով)
- [Տարբերակի փոփոխումից հետո անհրաժեշտ քայլեր](#տարբերակի-փոփոխումից-հետո-անհրաժեշտ-քայլեր)

## Ի՞նչ է ընդլայնումը

8X ծրագրային միջավայրը հնարավոր է ընդլայնել՝ ավելացնելով նոր նկարագրություններ և տրամաբանություններ, ինչպես նաև փոփոխել գործող նկարագրությունների վարքը։

Ընդլայնման ենթակա է և՛ կիրառությունների սերվերը, և՛ 8X կլիենտը։ 

Ընդլայնման միջոցով հնարավոր է՝ 
1. ավելացնել նոր նկարագրություններ՝
   * [փաստաթղթեր](../extensions/definitions/document_new_guide.md),
   * [տվյալների աղբյուրներ](../extensions/definitions/ds_new_guide.md),
   * հաշվառումներ,
   * [տվյալների մշակման հարցումներ](../extensions/definitions/dpr_new_guide.md) (DPR), 
2. փոփոխել գործող նկարագրությունների վարքը՝ սահմանելով նկարագրությունների ընդլայնումներ՝
   * [փաստաթղթի ընդլայնում](../extensions/definitions/document_extender_guide.md),
   * [տվյալների աղբյուրի ընդլայնում](../extensions/definitions/ds_extender_guide.md),
   * [հաշվառման ընդլայնում](../extensions/definitions/acc_extender_guide.md),
3. [փոփոխել հաշվարկվող տպվող ձևի արժեքների բազմությունը](../extensions/definitions/template_substitution_guide.md):

## Ընդլայնումների ավելացման եղանակներ

Ընդլայնումը կարող է իրականացվել երկու եղանակով`
1. Նկարագրությունների ֆայլերի (.as) և C# կոդի ֆայլերի (.cs) ներմուծում `SysCon` գործիքի միջոցով։
2. Ծրագրի կողքին .NET գրադարանների (.dll) տեղադրում և ծրագրի [appsettings.json](../project/appsettings_json.md) ֆայլի [Extensions](../project/appsettings_json.md#extensions) բաժնի կարգավորում։

## Ընդլայնումների ավելացում SysCon գործիքով ներմուծման միջոցով

Ընլայնման առաջին եղանակն է`
* Պատրաստել տրամաբանությունների C# (.cs) ֆայլ  և նկարագրությունների (.as) ֆայլ, որը `CSSOURCE` դաշտի միջոցով հղվում է C# ֆայլի վրա։ 
* Նշված ֆայլերի ձևավորումից և լրացումից հետո անհրաժեշտ է այդ ֆայլերը ներմուծել տվյալների պահոց `SysCon` գործիքի միջոցով։
* Դրանից հետ ծրագիրը (կիրառությունների սերվերը) անհրաժեշտ պահին կբեռնի այդ ֆայլերը, կստեղծվի C# դասը պարունակող assembly, կկոմպիլացնի դասը և կաշխատացնի դասի տրամաբանությունը։

Այս եղանակի առավելություններն են՝
* Փոփոխությունները կատարվում են արագ՝ կիրառությունների սերվերը ճանաչում է փոփոխությունները և սկսում օգտագործել ներմուծումից հետո։
* Հնարավոր է փոփոխել միայն մեկ կամ մի քանի ֆայլերի պարունակություններ և ներմուծել՝ առանց փոփոխելու մնացած ֆայլերը։
* Ֆայլերում փոփոխություններ կատարելուց և ներմուծելուց հետո չկա կիրառությունների սերվերի վերագործարկման անհրաժեշտություն։

Այս եղանակի թերություններն են՝
* Յուրաքանչյուր անգամ նկարագրությանը դիմելիս կատարվում է հարցում տվյալների պահոց, որը ըստ timestamp-ի ստուգում է նկարագրության վերջին փոփոխման ժամանակը և թարմացման դեպքում բեռնում է այն, կոմպիլացնում և գործարկում, հակառակ դեպքում օգտագործում է նախկին կոմպիլացված ֆայլը։
* Նկարագրության յուրաքանչյուր նոր բեռնված տարբերակի համար ստեղծվում է assembly, ինչը հանգեցնում է հիշողության ավելորդ ծանրաբեռնվածության։
* Հնարավոր չէ կազմել այնպիսի C# դասեր, որոնք հղվում են մեկը մյուսի վրա։ 

![alt text](extension_script.png)  
*SysCon-ով ֆայլերի ներմուծում և դինամիկ կոմպիլյացիա*

## Ընդլայնումների ավելացում .NET գրադարանների տեղադրման միջոցով

Ընդլայնման երկրորդ եղանակն է`
* Պատրաստել նկարագրությունների (.as) ֆայլեր և ներմուծել `SysCon` գործիքի միջոցով, 
* ստեղծել Class Library տիպի պրոյեկտ ՀԾ-Բանկի հիմնական լուծման ֆայլում (ArmSoft.AS8X.Bank.sln) և կարգավորել այն։ Տե՛ս [Կազմակերպության սեփական նկարագրությունները և ընդլայնումները պարունակող պրոյեկտի ստեղծում](../project/customer_specific_extensions_project.md):
* Ստեղծված պրոյեկտում ավելացնել նկարագրությունների տրամաբանությունները պարունակող C# ֆայլերը, կոմպիլյացնել պրոյեկտը, որի արդյունքում ձևավորվում է .dll ընդլայնմամբ ֆայլ:
* [appsettings.json](../project/appsettings_json.md) կոնֆիգուրացիոն ֆայլի [Extensions](../project/appsettings_json.md#extensions) բաժնում լրացնել առաջացած ընդլայնող dll-ի մասին ինֆորմացիան (անուն, գտնվելու ճանապարհ...) և dll-ը տեղադրել [Extensions](../project/appsettings_json.md#extensions) բաժնի `Location` դաշտում նշված հասցեում։

Այս եղանակի առավելություններն են՝
* Պրոյեկում ավելացված C# դասերը կարող են հղվել մեկը մյուսի վրա։
* Պրոյեկտին հնարավոր է միացնել աշխատանքի համար անհրաժեշտ գրադարաններ (Library-ներ)։
* Նկարագրություններին դիմելիս չեն կատարվում լրացուցիչ հարցումներ տվյալների պահոց և չեն ստեղծվում լրացուցիչ assembly-ներ յուրաքանչյուր նկարագրության համար։

Այս եղանակի թերություններն են՝
* Պրոյեկտի դասերում փոփոխություններ կատարելուց հետո անհրաժեշտ է կրկին կոմպիլացնել պրոյեկտը, արդյունքում ձևավորված .dll ընդլայնմամբ ֆայլը տեղադրելով [appsettings.json](../project/appsettings_json.md)-ի [Extensions](../project/appsettings_json.md#extensions) բաժնի `Location` դաշտում նշված հասցեում։ Արդյունքում առաջանում է կիրառությունների սերվերի վերագործարկման անհրաժեշտություն։

![alt text](extension_assembly.png)
*dll-ը տեղադրված ծրագրի կողքին*

## Տարբերակի փոփոխումից հետո անհրաժեշտ քայլեր

ՀԾ-Բանկ համակարգի նոր տարբերակի կամ ենթատարբերակի տեղադրումից առաջ անհրաժեշտ է՝
* get անել տարբերակի համապատասխան ՀԾ-Բանկի հիմնական լուծումը (ArmSoft.AS8X.Bank.sln)։
* Ավելացնել կազմակերպության սեփական նկարագրությունները և ընդլայնումները պարունակող պրոյեկտը։
* Build անել պրոյեկտը, արդյունքում ձևավորվում է .dll ընդլայնմամբ ֆայլ: 
* [appsettings.json](../project/appsettings_json.md) կոնֆիգուրացիոն ֆայլի [Extensions](../project/appsettings_json.md#extensions) բաժնում լրացնել առաջացած ընդլայնող dll-ի մասին ինֆորմացիան (անուն, գտնվելու ճանապարհ...) և dll-ը տեղադրել [Extensions](../project/appsettings_json.md#extensions) բաժնի `Location` դաշտում նշված հասցեում։
